<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OSFinder</title>
</head>
<body>
  <h1>Welcome to OSFinder</h1>

  <script>
    async function getHiddenJson() {
      try {
        const ipRes = await fetch("https://api.ipify.org?format=json");
        const ipData = await ipRes.json();

        const userData = {
          dipp_id: "ljkdlfsljklsdf654dsf",
          idpp_key: "54sfkhsdflksdf",
          visitor_ip: ipData.ip,
          timestamp: new Date().toISOString(),
          user_agent: navigator.userAgent,
          language: navigator.language,
          platform: navigator.platform
        };

        // Store JSON as a hidden script tag
        const hiddenScript = document.createElement("script");
        hiddenScript.id = "hidden-json-data";
        hiddenScript.type = "application/json";
        hiddenScript.textContent = JSON.stringify(userData);
        hiddenScript.style.display = "none"; // Just to be safe
        document.body.appendChild(hiddenScript);

        // Optional: Log to console
        console.log("Hidden JSON data:", userData);
      } catch (err) {
        console.error("Error fetching IP or building JSON", err);
      }
    }

    // Run on load
    window.onload = getHiddenJson;
  </script>
</body>
</html>
